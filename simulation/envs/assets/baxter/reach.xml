<?xml version="1.0" encoding="utf-8"?>
<mujoco>

    <compiler angle="radian" coordinate="local" meshdir="./meshes" texturedir="./textures"></compiler>
    <option timestep="0.002">
        <flag warmstart="enable"></flag>
    </option>

    <!-- import shared xml for baxter env -->
    <include file="shared.xml"></include>

    <worldbody>
        <!-- world variables -->
        <light directional="false" castshadow="false" cutoff="90" exponent="1" diffuse="1 1 1" specular="0 0 0" pos="1 0 1.5" dir="-1 0 -2.5"/>
        <geom name="ground" type="plane" material="MatPlane" pos="0 0 -0.95" size="4 4 .05" rgba="0.7 0.6 0.5 1"/>

        <!-- table object-->
        <body name="top" pos="0.6 0.0 -0.21">
            <!-- target, relative to table surface -->
            <site name="target0" pos="0 0 0.5" size="0.02 0.02 0.02" rgba="1 0 0 1" type="sphere"></site>
            <geom name="top" rgba="0.8 0.8 0.8 1" material="tabletop1" type="box" size="0.2 0.5 0.02" />
            <!-- leg 1 -->
            <body name="leg1" pos="0.19 0.49 -0.38">
                <geom name="leg1" rgba="0.2 0.2 0.2 1" type="box" size="0.01 0.01 0.36" />
            </body>
            <!-- leg 2 -->
            <body name="leg2" pos="0.19 -0.49 -0.38">
                <geom name="leg2" rgba="0.2 0.2 0.2 2" type="box" size="0.01 0.01 0.36" />
            </body>
            <!-- leg 3 -->
            <body name="leg3" pos="-0.19 0.49 -0.38">
                <geom name="leg3" rgba="0.2 0.2 0.2 3" type="box" size="0.01 0.01 0.36" />
            </body>
            <!-- leg 4 -->
            <body name="leg4" pos="-0.19 -0.49 -0.38">
                <geom name="leg4" rgba="0.2 0.2 0.2 4" type="box" size="0.01 0.01 0.36"  />
            </body>
        </body>

        <!-- import robot xml for baxter -->
        <include file="robot.xml"></include>

        <!-- box -->
        <body name="box" pos="0.6 0.0 0.0">
            <geom name="box" type="box"  rgba="1.0 0.0 0.0 1" size="0.03 0.03 0.03" />
            <site name="box" pos="0.0 0.0 0" rgba="0 0 1 1" size="0.035 0.035 0.035"/>
            <joint name="box" type="free" limited="false"/>
        </body>

        <!-- spring object -->
        <!-- <body name="bot" pos="0.6 0.1 -0.028">
            <joint name="bot" type="free" limited="false"/>
            <geom name="bot"  type="box" size="0.02 0.05 0.002" contype="2" conaffinity="2" />
            <inertial pos="0 0 0" mass="0.1" diaginertia="0.001 0.001 0.001"/>
            <body name="rod" pos="0.0 0.0 0.022">

                <geom name="rod" rgba="1.0 0.0 0.0 1" type="cylinder" size="0.005 0.02" contype="2" conaffinity="2" />
                <body name="top_spring" pos="0.0 0.0 0.0">
                    <geom name="top_spring" rgba="0.2 1.0 0.2 1" type="box" size="0.02 0.05 0.002" contype="2" conaffinity="2" group="0"/>
                    <joint name="axle" type="slide" pos="0 0 0.0" axis="0 0 1" range="-0.009 0.0"/>
                    <inertial pos="0 0 0" mass="0.0001" diaginertia="0.001 0.001 0.001"/>
                    <site name="top_spring" pos="0.0 0.0 0" rgba="0 1 0 1" size="0.01 0.01 0.01"/>
                </body>

            </body>
        </body> -->

        <!-- falling box object -->
        <!-- <body name="falling_box" pos="0.6 0.13 .2" quat="0 1 0 0">
            <geom name="falling_box" rgba="0.2 0.0 1.0 1" type="box" size="0.005 0.005 0.02" contype="1" conaffinity="1" />
            <inertial pos="0 0 0" mass="1" diaginertia="166.667 200 166.667"/>
            <joint name="falling_box" type="free" limited="false"/>
        </body> -->
    </worldbody>

    <actuator>
        <position joint="right_s0" ctrlrange="-1.70168 1.70168" ctrllimited="true" kp="10"/>
        <position joint="right_s1" ctrlrange="-2.147 1.047" ctrllimited="true" kp="10"/>
        <position joint="right_e0" ctrlrange="-3.05418 3.05418" ctrllimited="true" kp="10"/>
        <position joint="right_e1" ctrlrange="-0.05 2.618" ctrllimited="true" kp="10"/>
        <position joint="right_w0" ctrlrange="-3.059 3.059" ctrllimited="true" kp="10"/>
        <position joint="right_w1" ctrlrange="-1.5708 2.094" ctrllimited="true" kp="10"/>
        <position joint="right_w2" ctrlrange="-3.059 3.059" ctrllimited="true" kp="10"/>

        <position joint="left_s0" ctrlrange="-1.70168 1.70168" ctrllimited="true" kp="10000"/>
        <position joint="left_s1" ctrlrange="-2.147 1.047" ctrllimited="true" kp="1000"/>
        <position joint="left_e0" ctrlrange="-3.05418 3.05418" ctrllimited="true" kp="10"/>
        <position joint="left_e1" ctrlrange="-0.05 2.618" ctrllimited="true" kp="10"/>
        <position joint="left_w0" ctrlrange="-3.059 3.059" ctrllimited="true" kp="10"/>
        <position joint="left_w1" ctrlrange="-1.5708 2.094" ctrllimited="true" kp="10000"/>
        <position joint="left_w2" ctrlrange="-3.059 3.059" ctrllimited="true" kp="10"/>

        <!-- gripper -->
        <position joint="r_gripper_l_finger_joint" ctrlrange="0 0.020833" ctrllimited="true" />
        <position joint="r_gripper_r_finger_joint" ctrlrange="-0.020833 0" ctrllimited="true" />
        <position joint="l_gripper_l_finger_joint" ctrlrange="0 0.020833" ctrllimited="true" />
        <position joint="l_gripper_r_finger_joint" ctrlrange="-0.020833 0" ctrllimited="true" />

        <!-- spring -->
        <!-- <motor joint="axle" ctrlrange="-100.0 100.0" ctrllimited="true" /> -->
    </actuator>
</mujoco>
